apply plugin: "com.android.library"

android {
  compileSdkVersion 27
  defaultConfig {
    minSdkVersion 14
    targetSdkVersion 27
  }
  testOptions {
    unitTests.returnDefaultValues = true
  }
  compileOptions {
    sourceCompatibility JavaVersion.VERSION_1_8
    targetCompatibility JavaVersion.VERSION_1_8
  }
}

dependencies {
  api "com.github.andriydruk:dnssd:0.9.5"
  api "io.reactivex.rxjava2:rxandroid:2.0.1"
  api "io.reactivex.rxjava2:rxjava:2.1.7"
  api "com.android.support:support-annotations:27.0.2"

  testImplementation "junit:junit:4.12"
  // Last version supported by Power Mock:
  // https://github.com/powermock/powermock/wiki/Mockito#supported-versions
  testImplementation "org.mockito:mockito-core:2.8.9"
  testImplementation("org.powermock:powermock-api-mockito2:1.7.3") {
    exclude module: "hamcrest-core"
    exclude module: "objenesis"
  }
  testImplementation("org.powermock:powermock-module-junit4:1.7.3") {
    exclude module: "hamcrest-core"
    exclude module: "objenesis"
  }
}

// ------------------------------------------------------------------------------------------------
// Deployment Setup
//
// Releases are pushed to jcenter via Bintray, while snapshots are pushed to Sonatype OSS.
// This section defines the necessary tasks to push new releases and snapshots using Gradle tasks.
// ------------------------------------------------------------------------------------------------
project.ext.deployConfig = [platform   : "android",
                            groupId    : "de.mannodermaus",
                            artifactId : "druk-dnssd-rxjava2",
                            version    : "0.9.5",
                            license    : "Apache-2.0",
                            description: "RxJava 2 Bindings for Andriy Druk's DNSSD library."]
apply from: "$rootDir/gradle/deployment.gradle"
